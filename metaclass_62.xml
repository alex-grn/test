<SYSTEM id="62" name="Учет расходов на выборы 2">
	<MODULES id="Modules" name="Модули"/>
	<GROUPS_MENU name="Группы меню"/>
	<ATTRIBUTES name="Атрибуты">
		<A id="TYPE_ERR" name="Уровень значимости" caption="Уровень значимости" labelwidth="160" type="list" nulls="false" local="true">
				<AI id="1" name="Предупреждение"/>
				<AI id="2" name="Ошибка"/>
			</A>
	</ATTRIBUTES>
	<GROUPS_ATTRIBUTES name="Группы атрибутов"/>
	<TABLES name="Таблицы">
		<TABLE id="WORDINGOFTHEFORMS" name="Редакции форм">
			<A id="REPORTINGFORMID" name="Код формы" limit="50" caption="Код формы" labelwidth="400"/>
			<A id="REPORTINGFORMVIRT" name="Наименование формы" caption="Наименование формы" labelwidth="150" type="text" nulls="true" visible="true" virtual="true" formula="select r.CODEFORM||' от '||TO_CHAR(w.REVISIONDATE, 'DD.MM.YYYY') from REPORTINGFORM r, WORDINGOFTHEFORMS w where w.ID = @id and r.id = w.REPORTINGFORMID" local="true"/>
			<A id="REVISIONDATE" name="Дата редакции" caption="Дата редакции" labelwidth="600" type="date" nulls="false" local="true"/>
			<TI unique="CODEFORMID,REVISIONDATE"/>
		</TABLE>
		<TABLE id="MEASURESOFSHAPE" name="Показатели формы">
			<A id="WORDINGOFTHEFORMSID" parentkey="cascade"/>
			<A id="NAME" name="Наименование показателя" caption="Наименование показателя" labelwidth="150" type="text" nulls="false" local="true"/>
			<A id="CODE" name="Код строки формы" caption="Код строки формы" labelwidth="600" type="string" nulls="false" local="true"/>
			<A id="MARKTEXT" name="При сведении отчета добавлять строки по показателю" caption="При сведении отчета добавлять строки по показателю" width="600" type="boolean" local="true"/>
			<GA id="CONTROLOFFILLING" name="Контроль заполнения показателя" caption="Контроль заполнения показателя">
				<A id="COMPLETIONUIK" name="УИК" caption="УИК" width="15" type="boolean" local="true"/>
				<A id="COMPLETIONTIK" name="ТИК" caption="ТИК" width="15" type="boolean" local="true"/>
				<A id="COMPLETIONOIK" name="ОИК" caption="ОИК" width="15" type="boolean" local="true"/>
				<A id="COMPLETIONTIKWITHOIK" name="ТИК с полномочиями ОИК" caption="ТИК с полномочиями ОИК" width="30" type="boolean" local="true"/>
				<A id="COMPLETIONIKSRF" name="ИКСРФ" caption="ИКСРФ" width="15" type="boolean" local="true"/>
			</GA>
			<TI unique="CODE,WORDINGOFTHEFORMSID"/>
		</TABLE>
		<TABLE id="REPORTINGFORM" name="Формы отчётности">
			<A id="CODEFORM" name="Код формы" caption="Код формы" labelwidth="400" type="string" nulls="false" local="true"/>
			<A id="NAMEFORM" name="Наименование формы" caption="Наименование формы" labelwidth="150" type="text" nulls="false" local="true"/>
		</TABLE>
		<TABLE id="PKTO" name="Привязка к таблицам отчётности">
			<A id="REPORTINGFORMID" parentkey="cascade"/>
			<A id="NAMETABLEUIK" name="УИК" caption="УИК" labelwidth="150" type="list" nulls="true" local="true">
				<AI id="UIKS1SD" name="ACCOUNTABILITYUIKS1SD"/>
				<AI id="UIKS2AE" name="ACCOUNTABILITYUIKS2AE"/>
				<AI id="UIKP2" name="UIKPRIL2"/>
				<AI id="UIKP6" name="UIKPRIL6"/>
				<AI id="UIKP8" name="UIKPRIL8"/>
				<AI id="UIKP9" name="UIKPRIL9"/>
				<AI id="UIKP11" name="UIKPRIL11"/>
				<AI id="UIKP15" name="UIKPRIL15"/>
			</A>
			<A id="NAMETABLETIK" name="ТИК" caption="ТИК" labelwidth="150" type="list" nulls="true" local="true">
				<AI id="TIKS1SD" name="ACCOUNTABILITYTIKS1SD"/>
				<AI id="TIKS2AE" name="ACCOUNTABILITYTIKS2AE"/>
				<AI id="TIKP2" name="TIKPRIL2"/>
				<AI id="TIKP4" name="TIKPRIL4"/>
				<AI id="TIKP5" name="TIKPRIL5"/>
				<AI id="TIKP6" name="TIKPRIL6"/>
				<AI id="TIKP7" name="TIKPRIL7"/>
				<AI id="TIKP8" name="TIKPRIL8"/>
				<AI id="TIKP9" name="TIKPRIL9"/>
				<AI id="TIKP10" name="TIKPRIL10"/>
				<AI id="TIKP11" name="TIKPRIL11"/>
				<AI id="TIKP12" name="TIKPRIL12"/>
				<AI id="TIKP13" name="TIKPRIL13"/>
				<AI id="TIKP14" name="TIKPRIL14"/>
				<AI id="TIKP15" name="TIKPRIL15"/>
			</A>
			<A id="NAMETABLEIKSRF" name="ИКСРФ" caption="ИКСРФ" labelwidth="150" type="list" nulls="true" local="true">
				<AI id="IKSRFS1SD" name="ACCOUNTABILITYIKSRFS1SD"/>
				<AI id="IKSRFS2AE" name="ACCOUNTABILITYIKSRFS2AE"/>
				<AI id="IKSRFP1" name="IKSRFPRIL1"/>
				<AI id="IKSRFP2" name="IKSRFPRIL2"/>
				<AI id="IKSRFP3" name="IKSRFPRIL3"/>
				<AI id="IKSRFP4" name="IKSRFPRIL4"/>
				<AI id="IKSRFP5" name="IKSRFPRIL5"/>
				<AI id="IKSRFP6" name="IKSRFPRIL6"/>
				<AI id="IKSRFP7" name="IKSRFPRIL7"/>
				<AI id="IKSRFP8" name="IKSRFPRIL8"/>
				<AI id="IKSRFP9" name="IKSRFPRIL9"/>
				<AI id="IKSRFP10" name="IKSRFPRIL10"/>
				<AI id="IKSRFP11" name="IKSRFPRIL11"/>
				<AI id="IKSRFP12" name="IKSRFPRIL12"/>
				<AI id="IKSRFP13" name="IKSRFPRIL13"/>
				<AI id="IKSRFP14" name="IKSRFPRIL14"/>
				<AI id="IKSRFP15" name="IKSRFPRIL15"/>
				<AI id="IKSRFP15a" name="IKSRFPRIL15а"/>
				<AI id="IKSRFP16" name="IKSRFPRIL16"/>
				<AI id="IKSRFP17" name="IKSRFPRIL17"/>
			</A>
		</TABLE>
		<TABLE id="LISTOFCHECKS" name="Перечень проверок и пересчетов">
			<A id="WORDINGOFTHEFORMSID" labelwidth="150"/>
			<A id="DEFINITION" name="Описание" caption="Описание" labelwidth="150" type="text" local="true"/>
		</TABLE>
		<TABLE id="RECALCULATIONS" name="Пересчеты">
			<A id="LISTOFCHECKSID" parentkey="cascade"/>
			<A id="WORDINGOFTHEFORMSID" visible="false" readonly="true" formula="select WORDINGOFTHEFORMSID from LISTOFCHECKS where id=@LISTOFCHECKSID"/>
			<A id="MEASURESOFSHAPEID" name="Показатель" caption="Показатель" labelwidth="160" type="ref" pid="WORDINGOFTHEFORMSID" table="MEASURESOFSHAPE" ret="CODE" nulls="false"/>
			<A id="CONVERSIONTYPE" name="Тип" caption="Тип" labelwidth="160" type="list" nulls="false" local="true">
				<AI id="FORMULACONV" name="Формула" readonly="PROCEDURECONV"/>
				<AI id="PROCEDURECONV" name="Процедура"/>
			</A>
			<A id="ROUNDING" name="Округление" caption="Округление" labelwidth="160" type="list" nulls="false" local="true">
				<AI id="1" name="Стандартное"/>
			</A>
			<A id="NUMOFCHARAFT" name="Кол-во знаков после , 4" caption="Кол-во знаков после , 4" labelwidth="160" type="list" nulls="false" local="true">
				<AI id="1" name="0"/>
				<AI id="2" name="1"/>
				<AI id="3" name="2"/>
				<AI id="4" name="3"/>
				<AI id="5" name="4"/>
			</A>
			<A id="RECALCPROCEDURE" name="Процедура" caption="Процедура" labelwidth="160" type="text" nulls="true" local="true"/>
			<TI unique="MEASURESOFSHAPEID"/>
			<TI id="PROCEDURE_CHECK" name="Необходимо заполнить поле Процедура" check="CONVERSIONTYPE != 'PROCEDURECONV' or (CONVERSIONTYPE = 'PROCEDURECONV' and RECALCPROCEDURE is not null and RECALCPROCEDURE != '')"/>
			<TI id="FORMULA_CHECK" name="Поле Процедура должно быть пустым" check="CONVERSIONTYPE != 'FORMULACONV'  or (CONVERSIONTYPE = 'FORMULACONV' and (RECALCPROCEDURE is null or RECALCPROCEDURE = ''))"/>
		</TABLE>
		<TABLE id="TERMSRECALC" name="Слагаемые пересчетов">
			<A id="RECALCULATIONSID" parentkey="cascade"/>
			<A id="WORDINGOFTHEFORMSID" labelwidth="150"/>
			<A id="MEASURESOFSHAPEID" name="Показатель" caption="Показатель" labelwidth="150" type="ref" pid="WORDINGOFTHEFORMSID" table="MEASURESOFSHAPE" ret="CODE" nulls="false"/>
			<A id="ACTIONTERMS" name="Действие" caption="Действие" labelwidth="150" type="list" nulls="true" local="true">
				<AI id="1" name="Умножение"/>
				<AI id="2" name="Деление"/>
				<AI id="3" name="Процент"/>
			</A>
			<A id="COEFFICIENT" name="Коэффициент" caption="Коэффициент" labelwidth="150" type="number" len="8.2" nulls="true" local="true"/>
			<A id="REVISIONDATE" name="Дата редакции" caption="Дата редакции" labelwidth="600" type="date" virtual="true" formula="select REVISIONDATE from WORDINGOFTHEFORMS where ID = @WORDINGOFTHEFORMSID"/>
		</TABLE>
		<TABLE id="AUDITREPORT" name="Проверки">
			<A id="LISTOFCHECKSID" parentkey="cascade"/>
			<A id="WORDINGOFTHEFORMSID" visible="false" readonly="true" formula="select WORDINGOFTHEFORMSID from LISTOFCHECKS where id=@LISTOFCHECKSID"/>
			<A id="MEASURESOFSHAPEID" name="Показатель" caption="Показатель" labelwidth="160" type="ref" pid="WORDINGOFTHEFORMSID" table="MEASURESOFSHAPE" ret="CODE" nulls="false"/>
			<A id="CONVERSIONTYPE" name="Тип" caption="Тип" labelwidth="160" type="list" nulls="false" local="true">
				<AI id="1" name="Формула"/>
				<AI id="2" name="Процедура"/>
			</A>
			<A id="GRAPHA" name="Номер графы" caption="Номер графы" labelwidth="160" type="list"          query="select (t.sJSON->>'code')::text as id,(t.sJSON->>'name')::text as code
         from (select json_array_elements(P_SYSTEM_GET_TABLE_FIELDS(upper((select p_find_name_from_list('PKTO','NAMETABLEIKSRF',p.nametableiksrf)
          from WORDINGOFTHEFORMS w,
      PKTO p
where w.id = @WORDINGOFTHEFORMSID
and p.reportingformid = w.reportingformid
and p.nametableiksrf is not null
group by p.nametableiksrf )))::json) as sJSON) t
where (t.sJSON->>'name')::text ilike ANY(ARRAY['%1%','%2%','%3%','%4%','%5%','%6%','%7%','%8%','%9%','%0%'])"/>
			<A id="TYPE_ERR"/>
			<A id="ROUNDING" name="Округление" caption="Округление" labelwidth="160" type="list" nulls="false" local="true">
				<AI id="1" name="Стандартное"/>
			</A>
			<A id="NUMOFCHARAFT" name="Кол-во знаков после , 4" caption="Кол-во знаков после , 4" labelwidth="160" type="list" nulls="false" local="true">
				<AI id="1" name="0"/>
				<AI id="2" name="1"/>
				<AI id="3" name="2"/>
				<AI id="4" name="3"/>
				<AI id="5" name="4"/>
			</A>
			<A id="RECALCPROCEDURE" name="Процедура" caption="Процедура" labelwidth="160" type="text" nulls="true" local="true"/>
			<TI id="PROCEDURE_CHECK" name="Необходимо заполнить поле Процедура" check="CONVERSIONTYPE != '2' or (CONVERSIONTYPE = '2' and RECALCPROCEDURE is not null and RECALCPROCEDURE != '')"/>
			<TI id="FORMULA_CHECK" name="Поле Процедура должно быть пустым" check="CONVERSIONTYPE != '1'  or (CONVERSIONTYPE = '1' and (RECALCPROCEDURE is null or RECALCPROCEDURE = ''))"/>
		</TABLE>
		<TABLE id="TERMSAUDIT" name="Слагаемые проверок">
			<A id="AUDITREPORTID" parentkey="cascade"/>
			<A id="WORDINGOFTHEFORMSID" labelwidth="150"/>
			<A id="MEASURESOFSHAPEID" name="Показатель" caption="Показатель" labelwidth="150" type="ref" pid="WORDINGOFTHEFORMSID" table="MEASURESOFSHAPE" ret="CODE" nulls="false"/>
			<A id="ACTIONTERMS" name="Действие" caption="Действие" labelwidth="150" type="list" nulls="true" local="true">
				<AI id="1" name="Умножение"/>
				<AI id="2" name="Деление"/>
				<AI id="3" name="Процент"/>
			</A>
			<A id="COEFFICIENT" name="Коэффициент" caption="Коэффициент" labelwidth="150" type="number" len="8.2" nulls="true" local="true"/>
			<A id="REVISIONDATE" name="Дата редакции" caption="Дата редакции" labelwidth="600" type="date" virtual="true" formula="select REVISIONDATE from WORDINGOFTHEFORMS where ID = @WORDINGOFTHEFORMSID"/>
			<A id="GRAPHA" name="Номер графы" caption="Номер графы" labelwidth="160" type="list" query="select (t.sJSON->>'code')::text as id,(t.sJSON->>'name')::text as code
from (select json_array_elements(P_SYSTEM_GET_TABLE_FIELDS(upper((select p_find_name_from_list('PKTO','NAMETABLEIKSRF',p.nametableiksrf)
from WORDINGOFTHEFORMS w,
PKTO p
where w.id = @WORDINGOFTHEFORMSID
and p.reportingformid = w.reportingformid
and p.nametableiksrf is not null
group by p.nametableiksrf )))::json) as sJSON) t
where (t.sJSON->>'name')::text ilike ANY(ARRAY['%1%','%2%','%3%','%4%','%5%','%6%','%7%','%8%','%9%','%0%'])"/>
		</TABLE>
		
		<TABLE id="REPORT_INCLUSION" name="Предоставленная отчетность нижестоящих комиссий (временная таблица)">
			<A id="ELECTCAMPAIGNID" labelwidth="200"/>
			<A id="LEVELELCAMPAIGN" labelwidth="200" readonly="true" virtual="true" formula="select t.LEVELELCAMPAIGN from ELECTCAMPAIGN t where t.id = @ELECTCAMPAIGNID"/>
			<A id="DATECREATE" name="Дата представления отчётности" caption="Дата представления отчётности" labelwidth="200" type="date" nulls="false" local="true"/>
			<A id="ELECTCOMMITTEEID" labelwidth="200"/>
			<GA id="STATUSMODEL" name="Статусная модель" caption="Статусная модель">
				<A id="STATUS" name="Статус" caption="Статус" labelwidth="200" type="list" nulls="false" visible="true" readonly="true" local="true">
					<AI id="1" name="Включить в свод"/>
					<AI id="0" name="Не включать в свод"/>
				</A>
				<A id="STATUSREPORT" name="Статус отчёта" caption="Статус отчёта" labelwidth="190" width="50" type="list" nulls="false" local="true">
					<AI id="1" name="Представлен"/>	
				</A>
				<A id="TESTED" name="Состояние отчёта" caption="Состояние отчёта" labelwidth="190" width="50" type="list" nulls="false" local="true">
					<AI id="1" name="Расчитан"/>
					<AI id="2" name="Сформирован свод"/>
				</A>
				<A id="CHECKED" name="Проверка" caption="Проверка" labelwidth="190" width="50" type="list" nulls="false" local="true">
					<AI id="1" name="Без ошибок"/>
				</A>
				<A id="SUBMITTED" name="Представление отчёта для вышестоящей организации" caption="Представление отчёта для вышестоящей организации" labelwidth="190" width="50" type="list" nulls="false" local="true">
					<AI id="1" name="Отправлен"/>
				</A>
				<A id="INC_TBL" name="Наименование таблицы по отчетам, включаемым в свод" caption="Наименование таблицы по отчетам, включаемым в свод" type="string" nulls="false" visible="true" local="true"/>
				<A id="INC_REP_ID" name="ID отчета, включаемого в свод" caption="ID отчета, включаемого в свод" labelwidth="190" width="50" type="bigint" nulls="false" visible="true"  local="true"/>
				<A id="REP_TBL" name="Наименование таблицы по сводному отчету" caption="Наименование таблицы по сводному отчету" type="string" nulls="false" visible="true" local="true"/>
				<A id="REPORT_ID" name="ID сводного отчета" caption="ID сводного отчета" labelwidth="190" width="50" type="bigint" nulls="false" visible="true"  local="true"/>
					
			</GA>
		</TABLE>
	</TABLES>
	<ACTIONS name="Действия">
		<ACTION id="ProvidingDataAccounting" name="Сформировать данные из регистров бухучета" type="script" actionlist=""/>
		<ACTION id="InclusionStatus" name="Включить в свод" type="procedure" procedure="p_action_set_status">
			<P id="val" value="1"/>
		</ACTION>
		<ACTION id="InclusionReportUIK" name="Подобрать отчеты УИК для включения в свод ТИК за нижестоящие" type="procedure" procedure=""/>
		<ACTION id="InclusionReportTIK" name="Подобрать отчеты ТИК для включения в свод ИКСРФ за нижестоящие" type="procedure" procedure=""/>
		<ACTION id="ConsolidationUIK" name="Сформировать свод ТИК за нижестоящие УИК" type="procedure" procedure="">
			<FORM name="Формирование сводного отчета ТИК за нижестоящие УИК">
				<GRID name="Предоставленная отчетность УИК" table="REPORT_INCLUSION" readonly="true">
					<MENU>
						<MI actionlist="View;InclusionStatus;"/>
					</MENU>
				</GRID>
			</FORM>
		</ACTION>
		<ACTION id="ConsolidationTIK" name="Сформировать свод ИКСРФ за нижестоящие ТИК" type="procedure" procedure="">
			<FORM name="Формирование сводного отчета ИКСРФ за нижестоящие ТИК">
				<GRID name="Предоставленная отчетность ТИК" table="REPORT_INCLUSION" readonly="true">
					<MENU>
						<MI actionlist="View;InclusionStatus;"/>
					</MENU>
				</GRID>
			</FORM>
		</ACTION>
		<ACTION id="ConsolidationUIKResult" name="Формирование сводного отчета ТИК за нижестоящие УИК" type="script" actionlist="FillListOfIndincators;InclusionReportUIK;ConsolidationUIK"/>
		<ACTION id="ConsolidationTIKResult" name="Формирование сводного отчета ИКСРФ за нижестоящие ТИК" type="script" actionlist="FillListOfIndincators;InclusionReportTIK;ConsolidationTIK"/>
		<ACTION id="ConsolidationTIKFullReport" name="Сформировать сводный отчет по ТИК" type="procedure" procedure=""/>
		<ACTION id="ConsolidationIKSRFFullReport" name="Сформировать сводный отчет по ИКСРФ" type="procedure" procedure=""/>
		<ACTION id="DisbandUIKResult" name="Расформировать сводный отчет ТИК за нижестоящие УИК" type="procedure" procedure=""/>
		<ACTION id="DisbandTIKResult" name="Расформировать сводный отчет ИКСРФ за нижестоящие ТИК" type="procedure" procedure=""/>
		<ACTION id="ImportReportTIK" name="Загрузить отчет ТИК из Excel" type="script" actionlist="LoadAndConvertFile">
			<P id="convname" value="Загрузка отчетов ТИК"/>
			<P id="errorone" value="false"/>
		</ACTION>
		<ACTION id="ShowParts" name="Показать состав показателя" type="procedure" procedure="">
			<FORM name="Показать состав показателя">
				<GRID name="Состав показателя" table="" readonly="true">
					<MENU>
						<MI actionlist="View"/>
					</MENU>
				</GRID>
			</FORM>
		</ACTION>
	</ACTIONS>
	<REPORTS name="Отчеты"
>

	</REPORTS>
	<FORMS id="Forms" name="Формы"
>

	</FORMS>
</SYSTEM>
<SYSTEM id="62" name="Учет расходов на выборы 2">
	<MODULES id="Modules" name="Модули"/>
	<GROUPS_MENU name="Группы меню"/>
	<ATTRIBUTES name="Атрибуты">
		<A id="PROXYID" name="Доверенность" caption="Доверенность" labelwidth="200" type="ref" table="PROXY" ret="CODE" nulls="false"/>
		<A id="INPUTKRFID" name="Входящий файл" caption="Входящий файл" type="ref" table="INPUTKRF" ret="NUMBPP" nulls="false"/>
		<A id="CASHID" name="Касса" caption="Касса" type="ref" table="CASH" ret="ID" nulls="false"/>
		<A id="CONTRACTID" name="Поставщик" caption="Поставщик" type="ref" table="CONTRACTS" ret="DOCNUMB" nulls="false"/>
		<A id="RESPPERSON" name="МОЛ" caption="МОЛ" type="ref" table="MTRESPONSPERS" ret="PERSONID" nulls="false"/>
		<A id="PKOHEADERID" name="Заголовок ПКО" caption="Заголовок ПКО" type="ref" table="PKO_HEADER" ret="ID" nulls="false"/>
		<A id="RKOHEADERID" name="Заголовок РКО" caption="Заголовок РКО" type="ref" table="RKO_HEADER" ret="ID" nulls="false"/>
	</ATTRIBUTES>
	<GROUPS_ATTRIBUTES name="Группы атрибутов"/>
	<TABLES name="Таблицы">
		<TABLE id="LIABILITY" name="Договоры о материальной ответственности">
			<GA name="Избирательная кампания" caption="Избирательная кампания">
				<A id="ELECTCAMPAIGNID" labelwidth="200" nulls="false"/>
				<A id="LEVELELCAMPAIGN" labelwidth="200" readonly="true" virtual="true" formula="select t.LEVELELCAMPAIGN from ELECTCAMPAIGN t where t.id = @ELECTCAMPAIGNID"/>
				<A id="ELECTDATE" labelwidth="200" readonly="true" virtual="true" formula="select t.ELECTDATE from ELECTCAMPAIGN t where t.id = @ELECTCAMPAIGNID"/>
				<A id="JURPERSONSID"/>
				<A id="ELECTCOMMITTEEID" labelwidth="200" type="int" visible="false" readonly="true" virtual="true" formula="select t.ELECTCOMMITTEEID from JURPERSONS t where t.id = @JURPERSONSID" local="true"/>
			</GA>
			<GA name="Договор о материальной ответственности" caption="Договор о материальной ответственности">
				<A id="NUMBER" name="Номер" caption="Номер" labelwidth="70" width="40" type="string"/>
				<A id="DATE" name="Дата" caption="Дата" labelwidth="45" width="20" type="date"/>
			</GA>
			<GA name="Кем выдан договор" caption="Кем выдана">
				<A id="WHOISSUEDID" name="Кем выдан договор" type="ref" pid="ELECTCOMMITTEEID" table="COMMITTEEMAN" ret="CODE" nulls="false" local="true"/>
			</GA>
			<GA name="Кому выдан договор" caption="Кому выдана">
				<A id="RECEIVEDID" name="Кому выдан договор" type="ref" table="COMMITTEEMAN" ret="CODE" nulls="false" local="true"/>
			</GA>
		</TABLE>
		<TABLE id="PROXY" name="Доверенности">
			<GA name="Избирательная кампания" caption="Избирательная кампания">
				<A id="ELECTCAMPAIGNID" labelwidth="200" nulls="false"/>
				<A id="LEVELELCAMPAIGN" labelwidth="200" readonly="true" virtual="true" formula="select t.LEVELELCAMPAIGN from ELECTCAMPAIGN t where t.id = @ELECTCAMPAIGNID"/>
				<A id="ELECTDATE" labelwidth="200" readonly="true" virtual="true" formula="select t.ELECTDATE from ELECTCAMPAIGN t where t.id = @ELECTCAMPAIGNID"/>
				<A id="JURPERSONSID"/>
			</GA>
			<GA name="Доверенность" caption="Доверенность">
				<A id="DOCTYPEID" readonly="true" value="22" labelwidth="100"/>
				<A id="DOCNUMB" labelwidth="100"/>
				<A id="DOCDATE" width="50"/>
				<A id="ENDDATE" name="Срок действия" caption="Срок действия" width="50" type="date" nulls="true" local="true"/>
				<A id="PERSONID" labelwidth="100" caption="ФИО МОЛ" visible="true" nulls="false"/>
			</GA>
			<GA name="Поставщик" caption="Поставщик">
				<A id="CONTRACTID" name="Договор" caption="Договор"/>
				<A id="CONTRACTDATE" name="Дата договора" caption="Дата договора" width="50" type="date" readonly="true" virtual="true" formula="select t.DOCDATE from CONTRACTS t where t.id = @CONTRACTID"/>
				<A id="CONTRTYPE" name="Тип контракта" caption="Тип контракта" width="50" type="string" readonly="true" virtual="true" formula="CASE when (select t.CONTRTYPE from CONTRACTS t where t.id = @CONTRACTID) = 'product' then 'Поставка товара' when (select t.CONTRTYPE from CONTRACTS t where t.id = @CONTRACTID) = 'service' then 'Оказание услуг' else 'Выполнение работ' end"/>
				<A id="CONTRAGENTID" name="Поставщик" caption="Поставщик" type="string" readonly="true" virtual="true" formula="select a.NAME from CONTRACTS t, AGENT a where t.id = @CONTRACTID and a.id=t.agentid"/>
			</GA>
			<GA name="По документу" caption="По документу">
				<A id="DOCNAME" name="Наименование документа" caption="Наименование" labelwidth="90" type="string" width="70"  nulls="true"/>
				<A id="DOCNUMBER" name="Номер документа" caption="Номер" type="string" labelwidth="40" width="20"  nulls="true"/>
				<A id="DOCNAMEDATE" name="Дата документа" caption="Дата" type="date" labelwidth="30" width="10"  nulls="true"/>
			</GA>
		</TABLE>
		<TABLE id="GOODS" name="Товары">
			<A id="PROXYID" parentkey="cascade"/>
			<A id="NUMBPP" name="№ п/п" caption="№ п/п" labelwidth="50" width="20" type="number" nulls="false" formula="select coalesce(regexp_replace(max(lpad(numbpp::text,80,' ')), '[^0-9]', '', 'g')::int+1,1) from GOODS where PROXYID = @PROXYID and cid=0" local="true"/>
			<A id="CONTRACTSID" labelwidth="120" width="40" readonly="true" virtual="true" visible="false" formula="select t.CONTRACTID from PROXY t where t.id = @PROXYID"/>
			<GA name="Спецификация договора" caption="Спецификация договора">
				<A id="STAGESID" name="Спецификация" type="ref" table="STAGES" pid="CONTRACTSID" nulls="false" local="true"/>
				<A id="DICNOMNS" name="Наименование товара" caption="Наименование товара" type="string" labelwidth="125" width="60" readonly="true" virtual="true" formula="select t.CODE from DICNOMNS t, STAGES s where t.id = s.DICNOMNSID and s.id=@STAGESID"/>
				<A id="DICMUNTS" name="Единица измерения" caption="Единица измерения" type="string" labelwidth="120" width="25" readonly="true" virtual="true" formula="select d.name from DICNOMNS t, STAGES s, DICMUNTS d where t.id = s.DICNOMNSID and d.id=t.DICMUNTSID and s.id=@STAGESID"/>
				<A id="STAGEQUANTITY" name="Количество" caption="Количество" type="number" labelwidth="95" width="15" readonly="true" virtual="true" formula="select s.QUANTITY from STAGES s where s.id=@STAGESID"/>
			</GA>
			<A id="QUANTITY" type="number" labelwidth="90" width="60" nulls="false"/>
		</TABLE>
		<TABLE id="INPUTKRF" name="Файлы КРФ входящие">
			<A id="NUMBPP" name="№ п/п" caption="№ п/п" labelwidth="50" width="20" type="number" nulls="false" formula="select coalesce(regexp_replace(max(lpad(numbpp::text,80,' ')), '[^0-9]', '', 'g')::int+1,1) from INPUTKRF where UID = @UID and cid=0" local="true"/>
			<A id="CONVID" nulls="false" value="14" width="80"/>
			<A id="LOGIN" labelwidth="120" width="40" readonly="true" virtual="true" formula="select t.LOGIN from USERS t where t.id = @UID"/>
			<A id="ELECTCAMPAIGNID" nulls="false"/>
			<A id="IDKRF" name="КРФ" caption="КРФ" width="50" type="number" readonly="true" visible="false"/>
			<A id="FILELINKSID" name="Описание файла" visible="false" readonly="true"/>
			<A id="PRFILEVIRT" name="Имя файла" caption="Имя файла" labelwidth="200" type="string" nulls="true" visible="true" readonly="true" virtual="true" formula="select f.filename from filelinks f where f.id = @FILELINKSID" local="true"/>
			<A id="STATUS" name="Статус" caption="Статус" width="50" type="list" readonly="true">
				<AI id="1" name="Добавлен"/>
				<AI id="2" name="Загружен для обработки"/>
				<AI id="3" name="Обрабатывается"/>
				<AI id="4" name="Обработан"/>
			</A>
			<A id="UPLOADDATE" name="Дата добавления" caption="Дата добавления" type="date" labelwidth="30" width="10"  nulls="true" readonly="true" local="true"/>
			<A id="LOADDATE" name="Дата загрузки" caption="Дата загрузки" type="date" labelwidth="30" width="10"  nulls="true" readonly="true" local="true"/>
			<A id="CONVDATE" name="Дата обработки" caption="Дата обработки" type="date" labelwidth="30" width="10"  nulls="true" readonly="true" local="true"/>			
			<A id="LOG" name="Сообщение обработчика" caption="Сообщение обработчика" type="text" readonly="true"/>
		</TABLE>
		<TABLE id="ERRORKRF" name="Файлы КРФ входящие">
			<A id="INPUTKRFID" parentkey="cascade"/>
			<A id="NUMBPP" name="№ п/п" caption="№ п/п" labelwidth="50" len="5" width="20" type="number" nulls="false" formula="select coalesce(regexp_replace(max(lpad(numbpp::text,80,' ')), '[^0-9]', '', 'g')::int+1,1) from ERRORKRF where UID = @UID and cid=0" local="true"/>
			<A id="ERROR" name="Ошибка" caption="Ошибка" type="string" labelwidth="30" width="80"  nulls="true"/>
		</TABLE>
		<TABLE id="CASH" name="Касса избирательной кампании">
			<GA name="Избирательная кампания" caption="Избирательная кампания">
				<A id="ELECTCAMPAIGNID" labelwidth="200" nulls="false"/>
				<A id="LEVELELCAMPAIGN" labelwidth="200" readonly="true" virtual="true" formula="select t.LEVELELCAMPAIGN from ELECTCAMPAIGN t where t.id = @ELECTCAMPAIGNID"/>
				<A id="ELECTDATE" labelwidth="200" readonly="true" virtual="true" formula="select t.ELECTDATE from ELECTCAMPAIGN t where t.id = @ELECTCAMPAIGNID"/>
				<A id="JURPERSONSID"/>
			</GA>
		</TABLE>
		<TABLE id="PKO_HEADER" name="Приходные кассовые документы">
			<A id="CASHID" parentkey="cascade"/>
				<GA name="Основание" caption="Основание">
					<A id="DOCTYPEID" readonly="true" value="21" labelwidth="50" width="55"/>
					<A id="DOCSTATUS" name="Статус" caption="Статус" labelwidth="50" width="45" type="list" readonly="true">
						<AI id="1" name="Создан"/>
						<AI id="2" name="Оплачен"/>
						<AI id="3" name="Аннулирован"/>
					</A>
					<A id="DOCNUMB" labelwidth="50" width="58"/>
					<A id="DOCDATE" labelwidth="50" width="42"/>
					<A id="SUMM" readonly="true" type="number" len="8.2" nulls="true" labelwidth="120"/>
					<A id="PURPOSE" name="Целевое назначение" caption="Целевое назначение" labelwidth="120" type="string"/>
				</GA>				
				<GA name="Принято от" caption="Принято от">
					<A id="PERSONID"/>	
				</GA>
				<GA name="Основание" caption="Основание">
						<A id="CONTRACTID" caption="Договор"/>
						<A id="BASIS" name="Основание" caption="Основание" type="string"/>
						<A id="ATTACHMENT" name="Приложение" caption="Приложение" type="string"/>
				</GA>
		</TABLE>
		<TABLE id="PKO" name="ПКО Расшифровка платежа">		
			<A id="PKOHEADERID" parentkey="cascade"/>
			<GA name="Расшифровка платежа" caption="Расшифровка платежа">
				<A id="NUMBPP" name="№ п/п" caption="№ п/п" labelwidth="50" width="20" type="number" nulls="false" formula="select coalesce(regexp_replace(max(lpad(numbpp::text,80,' ')), '[^0-9]', '', 'g')::int+1,1) from PKO where PKOHEADERID = @PKOHEADERID and cid=0" local="true"/>
				<A id="SUMMPAY" caption="сумма" labelwidth="60" width="80"/>
			</GA>
			<GA name="Типовая операция" caption="Типовая операция">
				<A id="TYPICALOPERSID" labelwidth="150"/>
				<A id="BUDGCLASSID" labelwidth="150"/>
				<A id="TYPEEXPID" labelwidth="150"/>
			</GA>
			<GA name="Проводка" caption="Проводка">
					<A id="KPS" name="КПС" labelwidth="150" type="string" readonly="true" virtual="true" formula="select t.CODE from BUDGCLASS t where t.id = @BUDGCLASSID"/>
				<GA name="Дебет" caption="Дебет">
					<A id="DTACCNUMB" name="Счет" caption="Счет" labelwidth="50" width="20" type="string" readonly="true" virtual="true" formula="select d.ACCNUMB from typicaloperspec t, dicaccs d where t.TYPICALOPERSID = @TYPICALOPERSID and d.ID = t.accountdtid"/>
					<A id="DTACCNAME" name="Счет" caption=" " labelwidth="50" width="80" readonly="true" type="string" virtual="true" formula="select d.ACCNAME from typicaloperspec t, dicaccs d where t.TYPICALOPERSID = @TYPICALOPERSID and d.ID = t.accountdtid"/>
					<A id="DTECONCLASSNUMB" name="КОСГУ" caption="КОСГУ" labelwidth="50" type="string" readonly="true" virtual="true" formula="select d.CODE from typicaloperspec t, econclass d where t.TYPICALOPERSID = @TYPICALOPERSID and d.ID = t.econclassdtid"/>
				</GA>
				<GA name="Кредит" caption="Кредит">
					<A id="KTACCNUMB" name="Счет" caption="Счет" labelwidth="50" width="20" readonly="true" type="string" virtual="true" formula="select d.ACCNUMB from typicaloperspec t, dicaccs d where t.TYPICALOPERSID = @TYPICALOPERSID and d.ID = t.accountktid"/>
					<A id="KTACCNAME" name="Счет" labelwidth="50" readonly="true" width="80" type="string" virtual="true" formula="select d.ACCNAME from typicaloperspec t, dicaccs d where t.TYPICALOPERSID = @TYPICALOPERSID and d.ID = t.accountktid"/>
					<A id="KTECONCLASSNUMB" name="КОСГУ" caption="КОСГУ" labelwidth="50" type="string" readonly="true" virtual="true" formula="select d.CODE from typicaloperspec t, econclass d where t.TYPICALOPERSID = @TYPICALOPERSID and d.ID = t.econclassktid"/>
				</GA>
				<A id="MEMORDER" name="Журнал операций" caption="Журнал операций" type="string" labelwidth="150" readonly="true" virtual="true" formula="select d.NAME from typicaloperspec t, memorder d where t.TYPICALOPERSID = @TYPICALOPERSID and d.ID = t.memorderid"/>
			</GA>
		</TABLE>
		<TABLE id="RKO_HEADER" name="Расходные кассовые документы">
			<A id="CASHID" parentkey="cascade"/>
				<GA name="Основание" caption="Основание">
					<A id="DOCTYPEID" readonly="false" value="23" labelwidth="50" width="55" nulls="false"/>
					<A id="DOCSTATUS" name="Статус" caption="Статус" labelwidth="50" width="45" type="list" readonly="true">
						<AI id="1" name="Создан"/>
						<AI id="2" name="Оплачен"/>
						<AI id="3" name="Аннулирован"/>
					</A>
					<A id="DOCNUMB" labelwidth="50" width="58"/>
					<A id="DOCDATE" labelwidth="50" width="42"/>
					<A id="SUMM" readonly="true" type="number" len="8.2" nulls="true" labelwidth="120"/>
					<A id="PURPOSE" name="Целевое назначение" caption="Целевое назначение" labelwidth="120" type="string"/>
				</GA>				
				<GA name="Выдать" caption="Выдать">
					<A id="PERSONID" nulls="true"/>		
				</GA>
				<GA name="Основание" caption="Основание">
						<A id="CONTRACTID" caption="Договор"/>
						<A id="BASIS" name="Основание" caption="Основание" type="string"/>
						<A id="ATTACHMENT" name="Приложение" caption="Приложение" type="string"/>
				</GA>	
			<TI id="PERSON_CHECK" name="Необходимо заполнить поле Выдать" check="DOCTYPEID = 13 and PERSONID is null"/>
			<TI id="DOCTYPE_CHECK" name="Неверный тип документа" check="DOCTYPEID = 13 or DOCTYPEID = 23"/>
		</TABLE>
		<TABLE id="RKO" name="РКО Расшифровка платежа">		
			<A id="RKOHEADERID" parentkey="cascade"/>
			<A id="DOCTYPEID" name="Тип документа" caption="Тип документа" readonly="true" visible="false" type="bigint" nulls="false" formula="select t.DOCTYPEID from RKO_HEADER t where t.ID = @RKOHEADERID" local="true"/>
			<GA name="Расшифровка платежа" caption="Расшифровка платежа">
				<A id="NUMBPP" name="№ п/п" caption="№ п/п" labelwidth="50" width="20" type="number" nulls="false" formula="select coalesce(regexp_replace(max(lpad(numbpp::text,80,' ')), '[^0-9]', '', 'g')::int+1,1) from RKO where RKOHEADERID = @RKOHEADERID and cid=0" local="true"/>
				<A id="SUMMPAY" labelwidth="60" width="80"/>
				<A id="PERSONID" name="Контрагент" caption="Контрагент" nulls="true"/>
			</GA>
			<GA name="Типовая операция" caption="Типовая операция">
				<A id="TYPICALOPERSID" labelwidth="150"/>
				<A id="BUDGCLASSID" labelwidth="150"/>
				<A id="TYPEEXPID" labelwidth="150"/>
			</GA>
			<GA name="Проводка" caption="Проводка">
					<A id="KPS" name="КПС" labelwidth="150" type="string" readonly="true" virtual="true" formula="select t.CODE from BUDGCLASS t where t.id = @BUDGCLASSID"/>
				<GA name="Дебет" caption="Дебет">
					<A id="DTACCNUMB" name="Счет" caption="Счет" type="string" labelwidth="50" width="20" readonly="true" virtual="true" formula="select d.ACCNUMB from typicaloperspec t, dicaccs d where t.TYPICALOPERSID = @TYPICALOPERSID and d.ID = t.accountdtid"/>
					<A id="DTACCNAME" name="Счет" labelwidth="50" width="80" type="string" readonly="true" virtual="true" formula="select d.ACCNAME from typicaloperspec t, dicaccs d where t.TYPICALOPERSID = @TYPICALOPERSID and d.ID = t.accountdtid"/>
					<A id="DTECONCLASSNUMB" name="КОСГУ" caption="КОСГУ" type="string" labelwidth="50" readonly="true" virtual="true" formula="select d.CODE from typicaloperspec t, econclass d where t.TYPICALOPERSID = @TYPICALOPERSID and d.ID = t.econclassdtid"/>
				</GA>
				<GA name="Кредит" caption="Кредит">
					<A id="KTACCNUMB" name="Счет" caption="Счет" labelwidth="50" width="20" type="string" readonly="true" virtual="true" formula="select d.ACCNUMB from typicaloperspec t, dicaccs d where t.TYPICALOPERSID = @TYPICALOPERSID and d.ID = t.accountktid"/>
					<A id="KTACCNAME" name="Счет" labelwidth="50" readonly="true" width="80" type="string" virtual="true" formula="select d.ACCNAME from typicaloperspec t, dicaccs d where t.TYPICALOPERSID = @TYPICALOPERSID and d.ID = t.accountktid"/>
					<A id="KTECONCLASSNUMB" name="КОСГУ" caption="КОСГУ" labelwidth="50" type="string" readonly="true" virtual="true" formula="select d.CODE from typicaloperspec t, econclass d where t.TYPICALOPERSID = @TYPICALOPERSID and d.ID = t.econclassktid"/>
				</GA>
				<A id="MEMORDER" name="Журнал операций" caption="Журнал операций" labelwidth="150" type="string" readonly="true" virtual="true" formula="select d.NAME from typicaloperspec t, memorder d where t.TYPICALOPERSID = @TYPICALOPERSID and d.ID = t.memorderid"/>
			</GA>
			<TI id="AGENT_CHECK" name="Необходимо заполнить поле Контрагент" check="DOCTYPEID = 23 and PERSONID is null"/>	
		</TABLE>
	</TABLES>
	<ACTIONS name="Действия"/>
	<REPORTS name="Отчеты"/>
	<FORMS id="Forms" name="Формы">
		<FORM id="LiabilityFRM" name="Договоры о материальной ответственности">
			<GRID id="LiabilityGR" name="Договоры о материальной ответственности" table="LIABILITY"/>
		</FORM>
		<FORM id="ProxyFRM" name="Доверенности">
			<GRID id="ProxyGR" name="Доверенности" table="PROXY"/>
			<GRID id="GoodsGR" name="Спецификация" table="GOODS"/>
		</FORM>
		<FORM id="INPUTKRFFRM" name="Загрузка форм КРФ">
			<GRID id="INPUTKRFGR" name="Загрузка форм КРФ" table="INPUTKRF" actionlist="uploadFilelinks;loadFilelinks"/>
			<GRID id="ERRORKRFGR" name="Ошибки форм КРФ" table="ERRORKRF" readonly="true"/>
		</FORM>
		<FORM id="CashFRM" name="Касса избирательной кампании">
			<GRID id="CashGR" name="Касса избирательной кампании" table="CASH">
			</GRID>
			<TABS>
				<TAB name="Приходные кассовые документы">
					<TABS>
						<TAB name="Документ">						
							<GRID id="PKOHEADERGR" name="Приходные кассовые документы" table="PKO_HEADER">
							</GRID>
						</TAB>	
						<TAB name="Расшифровка платежа">						
							<GRID id="PKOGR" name="Приходные кассовые документы" table="PKO">
							</GRID>
						</TAB>
					</TABS>
				</TAB>
				<TAB name="Расходные кассовые документы">
					<TABS>
						<TAB name="Документ">						
							<GRID id="RKOHEADERGR" name="Приходные кассовые документы" table="RKO_HEADER">
							</GRID>
						</TAB>	
						<TAB name="Расшифровка платежа">						
							<GRID id="RKOGR" name="Приходные кассовые документы" table="RKO">
							</GRID>
						</TAB>
					</TABS>
				</TAB>
			</TABS>	
		</FORM>	
	</FORMS>
</SYSTEM>

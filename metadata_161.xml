<SYSTEM id="161" name="Методическая и техническая поддержка">
	<MODULES id="Modules" name="Модули">
		<MODULE id="MTP" name="Методическая и техническая поддержка" menu="MTP"/>
	</MODULES>
	<GROUPS_MENU name="Группы меню">
		<MENU id="MTP" name="Методическая и техническая поддержка">
			<MENU name="Файл">
				<MI name="Параметры" formlist="Options"/>
				<MI name="Загруженные файлы" formlist="Filelinks"/>
				<MI name="Журнал ошибок" formlist="fErrLog"/>
				<MI name="Выйти" actionlist="Exit"/>
			</MENU>
			<MENU name="Контроль">
				<MI name="События" formlist="fClnEvents"/>
				<MI name="Документы" formlist="fDocument"/>
				<MI name="Сообщения-реестр" formlist="fMessage"/>
				<MI name="Сообщения к исполнению" formlist="fMessageExec"/>
				<MI name="Журнал ошибок" formlist="fErrLog"/>
			</MENU>
			<MENU name="Отчеты">
				<MENU name="Контроль">
					<MI name="Журнал событий" formlist="fClnEventsList" reportlist="rClnEventsList"/>
				</MENU>
			</MENU>
			<MENU name="Справка">
				<MI name="Руководство пользователя" actionlist="HelpMtpUser"/>
			</MENU>
		</MENU>
	</GROUPS_MENU>
	<ATTRIBUTES name="Атрибуты">
		<A id="STATUS_CLN_EVENTS" name="Статус" caption="Статус" labelwidth="100" type="list" nulls="false" value="1">
			<AI id="1" name="Новое"/>
			<AI id="2" name="В работе"/>
			<AI id="3" name="На уточнении"/>
			<AI id="4" name="На доработке"/>
			<AI id="5" name="Исполнено" readonly="true"/>
			<AI id="0" name="Аннулировано" readonly="true"/>
		</A>
		<A id="STATUS" name="Статус" caption="Статус" labelwidth="100" type="list" nulls="false" value="1">
			<AI id="1" name="Черновик"/>
			<AI id="2" name="На согласовании"/>
			<AI id="3" name="Согласовано" readonly="true"/>
			<AI id="0" name="Архив" readonly="true"/>
		</A>
		<A id="EXECUTOR_ID" name="Ответств.исполнитель" caption="Ответств.исполнитель" labelwidth="150" type="ref" table="PERSON" ret="CODE" form="Person" nulls="true"/>
		<A id="CLN_EVENTS_ID" name="События" caption="События" labelwidth="150" type="ref" table="CLN_EVENTS" ret="ID" form="fClnEvents" nulls="false"/>
		<A id="CLN_EVENTS_HIST_ID" name="История события" caption="История события" labelwidth="150" type="ref" table="CLN_EVENTS_HIST" ret="ID" form="fClnEvents" nulls="false"/>
		<A id="DOCUMENT_ID" name="Документы" caption="Документы" labelwidth="150" type="ref" table="DOCUMENT" ret="ID" form="fDocument" nulls="false"/>
		<A id="MESSAGE_ID" name="Сообщения" caption="Сообщения" labelwidth="150" type="ref" table="MESSAGE" ret="ID" form="fMessage" nulls="false"/>
		<A id="BKD" name="Код бюджет.классиф.доходов" caption="Код бюджет.классиф.доходов" labelwidth="100" type="string" nulls="true"/>
	</ATTRIBUTES>
	<GROUPS_ATTRIBUTES name="Группы атрибутов"/>
	<TABLES name="Таблицы">
		<TABLE id="ERRLOG" name="Журнал ошибок">
			<A id="COD_ID_VIRT" name="N" caption="N" labelwidth="150" type="string" len="18" nulls="true" readonly="true" virtual="true" formula="select @ID::text" local="true"/>
			<A id="DOCDATE" name="Дата" caption="Дата" labelwidth="50" type="date" nulls="false" local="true"/>
			<A id="UNIT" name="Раздел" caption="Раздел" labelwidth="50" type="string" nulls="true" local="true"/>
			<GA id="DictionaryNote"/>
			<TI id="ERRLOGDOCDATE_IND" index="DOCDATE"/>
			<TI id="ERRLOGCODE_IND" index="CODE"/>
			<TI id="ERRLOGNAME_IND" index="NAME"/>
			<TI id="ERRLOGNOTE_IND" index="NOTE"/>
		</TABLE>
		<TABLE id="CLN_EVENTS" name="События">
			<GA name="Заголовок" caption="Заголовок">
				<A id="COD_ID_VIRT" name="N" caption="N" labelwidth="150" type="string" len="18" nulls="true" readonly="true" virtual="true" formula="select @ID::text" local="true"/>
				<A id="DOCDATE" name="Дата" caption="Дата" labelwidth="100" type="date" nulls="false" formula="now()" local="true"/>
			</GA>
			<GA name="Инициатор" caption="Инициатор">
				<A id="DEPART_ID"/>
				<A id="PERSON_ID" name="Автор" caption="Автор" labelwidth="150" nulls="false"/>
				<A id="PERSON_NAME_VIRT" name="Автор" caption="Автор" labelwidth="150" type="string" nulls="true" visible="form" readonly="true" virtual="true" formula="select p_get_person_name(@PERSON_ID ::bigint) ::text" local="true"/>
			</GA>
			<A id="STATUS_CLN_EVENTS"/>
			<A id="EXECUTOR_ID" name="Исполнитель" caption="Исполнитель" labelwidth="100" width="10"/>
			<A id="EXECUTOR_NAME_VIRT" name="Исполнитель" caption="Исполнитель" labelwidth="100" type="string" nulls="true" visible="form" readonly="true" virtual="true" formula="select p_get_person_name(@EXECUTOR_ID ::bigint) ::text" local="true"/>
			<A id="DESCRIPTION" labelwidth="100"/>
			<A id="NOTE" labelwidth="100"/>
			<TI id="CLN_EVENTS_DOCDATE_IND" index="DOCDATE"/>
			<TI id="CLN_EVENTS_DEPART_ID_IND" index="DEPART_ID"/>
			<TI id="CLN_EVENTS_PERSON_ID_IND" index="PERSON_ID"/>
			<TI id="CLN_EVENTS_STATUS_IND" index="STATUS_CLN_EVENTS"/>
			<TI id="CLN_EVENTS_EXECUTOR_ID_IND" index="EXECUTOR_ID"/>
		</TABLE>
		<TABLE id="CLN_EVENTS_FILE" name="Файлы События">
			<A id="COD_ID_VIRT" name="N" caption="N" labelwidth="150" type="string" len="18" nulls="true" readonly="true" virtual="true" formula="select @ID::text" local="true"/>
			<A id="CLN_EVENTS_ID" parentkey="cascade"/>
			<GA id="FileInformation"/>
			<TI id="CLN_EVENTS_FILE_PRN_IND" index="CLN_EVENTS_ID"/>
		</TABLE>
		<TABLE id="CLN_EVENTS_HIST" name="История события">
			<A id="CLN_EVENTS_ID" parentkey="cascade"/>
			<A id="COD_ID_VIRT" name="N" caption="N" labelwidth="150" type="string" len="18" nulls="true" visible="form" readonly="true" virtual="true" formula="select @ID::text" local="true"/>
			<GA name="Инициатор" caption="Инициатор">
				<A id="DEPART_ID"/>
				<A id="PERSON_ID" name="Автор" caption="Автор" labelwidth="150" nulls="false"/>
				<A id="PERSON_NAME_VIRT" name="Автор" caption="Автор" labelwidth="150" type="string" nulls="true" visible="form" readonly="true" virtual="true" formula="select p_get_person_name(@PERSON_ID ::bigint) ::text" local="true"/>
			</GA>
			<A id="STATUS_CLN_EVENTS" name="Статус" caption="Статус" labelwidth="150" readonly="true"/>
			<A id="EXECUTOR_ID" name="Исполнитель" caption="Исполнитель" labelwidth="150" readonly="true"/>
			<A id="EXECUTOR_NAME_VIRT" name="Исполнитель" caption="Исполнитель" labelwidth="150" type="string" nulls="true" visible="form" readonly="true" virtual="true" formula="select p_get_person_name(@EXECUTOR_ID ::bigint) ::text" local="true"/>
			<A id="USER_STATUS_VIRT" name="Пользователь" caption="Пользователь" labelwidth="150" width="150" type="string" nulls="false" readonly="true" virtual="true" formula="select name from users where id=@UID ::bigint"/>
			<A id="DATE_STATUS_VIRT" name="Дата" caption="Дата" labelwidth="150" width="150" type="datetime" nulls="true" readonly="true" virtual="true" formula="select tim from CLN_EVENTS_HIST where id=@ID"/>
			<A id="DESCRIPTION" labelwidth="150"/>
			<A id="NOTE" labelwidth="150"/>
			<TI id="CLN_EVENTS_HIST_PRN_IND" index="CLN_EVENTS_ID"/>
			<TI id="CLN_EVENTS_HIST_LOG_IND" index="STATUS_CLN_EVENTS"/>
			<TI id="CLN_EVENTS_HIST_EXECUTOR_ID_IND" index="EXECUTOR_ID"/>
		</TABLE>
		<TABLE id="MESSAGE" name="Сообщения - реестр">
			<A id="COD_ID_VIRT" name="N" caption="N" labelwidth="150" type="string" len="18" nulls="true" readonly="true" virtual="true" formula="select @ID::text" local="true"/>
			<A id="DOCDATE" name="Дата регистрации" caption="Дата регистрации" labelwidth="100" type="date" nulls="false" formula="now()" local="true"/>
			<A id="TEXT_MESS" name="Текст сообщения" caption="Текст сообщения" labelwidth="100" type="text" nulls="false" local="true"/>
			<A id="DATE_ARCHIVE" name="Дата перевода в архив" caption="Дата перевода в архив" labelwidth="100" type="date" nulls="true" local="true"/>
			<A id="STATUS"/>
			<TI id="MESSAGE_DOCDATE_IND" index="DOCDATE"/>
			<TI id="MESSAGE_TEXT_MESS_IND" index="TEXT_MESS"/>
			<TI id="MESSAGE_DATE_ARCHIVE_IND" index="DATE_ARCHIVE"/>
			<TI id="MESSAGE_STATUS_IND" index="STATUS"/>
		</TABLE>
		<TABLE id="MESSAGE_EXEC" name="Сообщения к исполнению" virtual="true" query="select       a.ID,       a.HID,       a.LID,       a.CID,       a.UID,       a.TIM,       a.DOCDATE,      a.TEXT_MESS,      a.DATE_ARCHIVE,      a.STATUS      from MESSAGE a      where a.STATUS ='3'">
			<A id="COD_ID_VIRT" name="N" caption="N" labelwidth="150" type="string" len="18" nulls="true" readonly="true" virtual="true" formula="select @ID::text" local="true"/>
			<A id="DOCDATE" name="Дата регистрации" caption="Дата регистрации" labelwidth="100" type="date" nulls="false" formula="now()" local="true"/>
			<A id="TEXT_MESS" name="Текст сообщения" caption="Текст сообщения" labelwidth="100" type="text" nulls="false" local="true"/>
			<A id="DATE_ARCHIVE" name="Дата перевода в архив" caption="Дата перевода в архив" labelwidth="100" type="date" nulls="true" local="true"/>
			<A id="STATUS"/>
		</TABLE>
		<TABLE id="DOCUMENT" name="Документы">
			<A id="COD_ID_VIRT" name="N" caption="N" labelwidth="150" type="string" len="18" nulls="true" readonly="true" virtual="true" formula="select @ID::text" local="true"/>
			<GA id="DictionaryNote"/>
			<A id="DOCDATE" name="Дата размещения" caption="Дата размещения" labelwidth="100" type="date" nulls="false" formula="now()" local="true"/>
			<A id="STATUS"/>
			<TI id="DOCUMENT_UK" unique="CODE,NAME"/>
			<TI id="DOCUMENT_CODE_IND" index="CODE"/>
			<TI id="DOCUMENT_NAME_IND" index="NAME"/>
			<TI id="DOCUMENT_DOCDATE_IND" index="DOCDATE"/>
			<TI id="DOCUMENT_STATUS_IND" index="STATUS"/>
		</TABLE>
		<TABLE id="DOCUMENT_FILE" name="Файлы документа">
			<A id="COD_ID_VIRT" name="N" caption="N" labelwidth="150" type="string" len="18" nulls="true" readonly="true" virtual="true" formula="select @ID::text" local="true"/>
			<A id="DOCUMENT_ID" parentkey="cascade"/>
			<GA id="FileInformation"/>
			<TI id="DOCUMENT_FILE_PRN_IND" index="DOCUMENT_ID"/>
		</TABLE>
	</TABLES>
	<ACTIONS name="Действия">
		<ACTION id="HelpMtpUser" name="Руководство Пользователя" type="link" href="help/mtp_user" visible="window"/>
		<ACTION id="aStatus0" name="Архив" type="procedure" procedure="p_action_status_doc">
			<FORM>
				<A id="STATUS" visible="false" value="0"/>
				<A id="NOTE" nulls="true"/>
			</FORM>
		</ACTION>
		<ACTION id="aStatus1" name="Черновик" type="procedure" procedure="p_action_status_doc">
			<FORM>
				<A id="STATUS" visible="false" value="1"/>
				<A id="NOTE" nulls="true"/>
			</FORM>
		</ACTION>
		<ACTION id="aStatus2" name="На согласование" type="procedure" procedure="p_action_status_doc">
			<FORM>
				<A id="STATUS" visible="false" value="2"/>
				<A id="NOTE" nulls="true"/>
			</FORM>
		</ACTION>
		<ACTION id="aStatus3" name="Согласовано" type="procedure" procedure="p_action_status_doc">
			<FORM>
				<A id="STATUS" visible="false" value="3"/>
				<A id="NOTE" nulls="true"/>
			</FORM>
		</ACTION>
		<ACTION id="aStatus4" name="На доработку" type="procedure" procedure="p_action_status_doc">
			<FORM>
				<A id="STATUS" visible="false" value="4"/>
				<A id="NOTE" nulls="true"/>
			</FORM>
		</ACTION>
		<ACTION id="aStatus5" name="Изменено" type="procedure" procedure="p_action_status_doc">
			<FORM>
				<A id="STATUS" visible="false" value="5"/>
				<A id="NOTE" nulls="true"/>
			</FORM>
		</ACTION>
		<ACTION id="aStatusClnEvents0" name="Аннулировано" type="procedure" procedure="p_action_status_cln_events">
			<FORM>
				<A id="STATUS_CLN_EVENTS" visible="false" value="0"/>
				<A id="EXECUTOR_ID" name="Исполнитель" caption="Исполнитель"/>
				<A id="NOTE" nulls="true"/>
			</FORM>
		</ACTION>
		<ACTION id="aStatusClnEvents1" name="Новое" type="procedure" procedure="p_action_status_cln_events">
			<FORM>
				<A id="STATUS_CLN_EVENTS" visible="false" value="1"/>
				<A id="EXECUTOR_ID" name="Исполнитель" caption="Исполнитель"/>
				<A id="NOTE" nulls="true"/>
			</FORM>
		</ACTION>
		<ACTION id="aStatusClnEvents2" name="В работу" type="procedure" procedure="p_action_status_cln_events">
			<FORM>
				<A id="STATUS_CLN_EVENTS" visible="false" value="2"/>
				<A id="EXECUTOR_ID" name="Исполнитель" caption="Исполнитель"/>
				<A id="NOTE" nulls="true"/>
			</FORM>
		</ACTION>
		<ACTION id="aStatusClnEvents3" name="На уточнение" type="procedure" procedure="p_action_status_cln_events">
			<FORM>
				<A id="STATUS_CLN_EVENTS" visible="false" value="3"/>
				<A id="EXECUTOR_ID" name="Исполнитель" caption="Исполнитель"/>
				<A id="NOTE" nulls="true"/>
			</FORM>
		</ACTION>
		<ACTION id="aStatusClnEvents4" name="На доработку" type="procedure" procedure="p_action_status_cln_events">
			<FORM>
				<A id="STATUS_CLN_EVENTS" visible="false" value="4"/>
				<A id="EXECUTOR_ID" name="Исполнитель" caption="Исполнитель"/>
				<A id="NOTE" nulls="true"/>
			</FORM>
		</ACTION>
		<ACTION id="aStatusClnEvents5" name="Исполнено" type="procedure" procedure="p_action_status_cln_events">
			<FORM>
				<A id="STATUS_CLN_EVENTS" visible="false" value="5"/>
				<A id="EXECUTOR_ID" name="Исполнитель" caption="Исполнитель"/>
				<A id="NOTE" nulls="true"/>
			</FORM>
		</ACTION>
	</ACTIONS>
	<REPORTS name="Отчеты">
		<REPORT id="rClnEventsList" name="Журнал событий" template="rpt_cln_events_list.xlsx">
			<FORM>
				<A id="DATE_TO" caption="На дату" labelwidth="200" type="date" nulls="false" formula="now()" local="true"/>
				<A id="DEPART_ID" nulls="true"/>
			</FORM>
		</REPORT>
	</REPORTS>
	<FORMS id="Forms" name="Формы">
		<FORM id="fErrLog" name="Журнал ошибок">
			<GRID id="gErrLog" name="Журнал ошибок" table="ERRLOG">
				<MENU>
					<MI actionlist="Insert;Update;Delete;MoveFolder;ConfigTables"/>
				</MENU>
			</GRID>
		</FORM>
		<FORM id="fClnEvents" name="События">
			<GRID id="gClnEvents" name="События" table="CLN_EVENTS" actionlist="aStatusClnEvents1;aStatusClnEvents2;aStatusClnEvents3;aStatusClnEvents4;aStatusClnEvents5;aStatusClnEvents0">
				<MENU>
					<MI actionlist="Insert;Update;Delete;MoveFolder;ConfigTables"/>
				</MENU>
			</GRID>
			<GRID id="gClnEventsHist" name="История События" table="CLN_EVENTS_HIST" readonly="true">
				<MENU>
					<MI actionlist="View;ConfigTables"/>
				</MENU>
			</GRID>
			<GRID id="gClnEventsFile" name="Файлы События" table="CLN_EVENTS_FILE" actionlist="addFilelinks;loadFilelinks">
				<MENU>
					<MI actionlist="Insert;Update;Delete;MoveFolder;ConfigTables"/>
				</MENU>
			</GRID>
		</FORM>
		<FORM id="fMessage" name="Сообщения - реестр">
			<GRID id="gMessage" name="Сообщения - реестр" table="MESSAGE" actionlist="aStatus1;aStatus2;aStatus3;aStatus0">
				<MENU>
					<MI actionlist="Insert;Update;Delete;MoveFolder;ConfigTables"/>
				</MENU>
			</GRID>
		</FORM>
		<FORM id="fMessageExec" name="Сообщения к исполнению">
			<GRID id="gMessageExec" name="Сообщения  к исполнению" table="MESSAGE_EXEC" actionlist="aStatus0">
				<MENU>
					<MI actionlist="MoveFolder;ConfigTables"/>
				</MENU>
			</GRID>
		</FORM>
		<FORM id="fDocument" name="Документы">
			<GRID id="gDocument" name="Документы" table="DOCUMENT" actionlist="aStatus1;aStatus2;aStatus3;aStatus0">
				<MENU>
					<MI actionlist="Insert;Update;Delete;MoveFolder;ConfigTables"/>
				</MENU>
			</GRID>
			<GRID id="gDocumentFile" name="Файлы Документа" table="DOCUMENT_FILE" actionlist="addFilelinks;loadFilelinks">
				<MENU>
					<MI actionlist="Insert;Update;Delete;MoveFolder;ConfigTables"/>
				</MENU>
			</GRID>
		</FORM>
	</FORMS>
</SYSTEM>

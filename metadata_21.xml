<SYSTEM id="21" name="Управление процессами">
	<MODULES id="Modules" name="Модули">
		<MODULE id="BPMS" name="Управление процессами" menu="BPMS"/>
	</MODULES>
	<GROUPS_MENU name="Группы меню">
		<MENU id="BPMS" name="Меню модуля Управление процессами">
			<MENU name="Файл">
				<MI name="Загрузить конфигурацию" actionlist="ConfigLoad"/>
				<MI name="Параметры системы" formlist="Options"/>
				<MI name="Загруженные файлы" formlist="Filelinks"/>
				<MI name="Выйти" actionlist="Exit"/>
			</MENU>
			<MENU name="Описание процессов">
				<MI name="Процессы" formlist="Bppool"/>
			</MENU>
			<MENU name="Задачи">
				<MI name="Задачи" formlist="Tasks"/>
				<MI name="Активные задачи" formlist="ActiveTasks"/>
			</MENU>
			<MENU name="Справочники">
				<MI name="Уровни доступа" formlist="LevAccess"/>
			</MENU>
			<MENU name="Справка">
				<MI name="Содержание" actionlist="Help"/>
			</MENU>
		</MENU>
	</GROUPS_MENU>
	<ATTRIBUTES name="Атрибуты">
		<A id="BPPOOLID" name="Процессы" caption="Процессы" labelwidth="300" type="ref" table="BPPOOL" ret="CODE" form="Bppool" nulls="true"/>
		<A id="BPEVENTID" name="События" caption="События" labelwidth="300" type="ref" pid="BPPOOLID" table="BPEVENT" ret="CODE" nulls="true"/>
		<A id="BPACTIVITYID" name="Действия" caption="Действия" labelwidth="300" type="ref" pid="BPPOOLID" table="BPACTIVITY" ret="CODE" nulls="true"/>
		<A id="BPACTIVITYID2" name="Действия" caption="Действия" labelwidth="300" type="ref" pid="BPPOOLID" table="BPACTIVITY" ret="CODE" nulls="true"/>
		<A id="BPGATEWAYID" name="Оператор ИЛИ" caption="Оператор ИЛИ" labelwidth="300" type="ref" pid="BPPOOLID" table="BPGATEWAY" ret="CODE" nulls="true"/>
		<A id="BPGATEWAYANDID" name="Оператор И" caption="Оператор И" labelwidth="300" type="ref" pid="BPPOOLID" table="BPGATEWAYAND" ret="CODE" nulls="true"/>
		<A id="DAYS" name="Дни" caption="Дни" labelwidth="100" type="int" len="3" nulls="false" value="0"/>
		<A id="HOURS" name="Часы" caption="Часы" labelwidth="100" type="int" len="2" nulls="false" value="0"/>
		<A id="MINUTES" name="Минуты" caption="Минуты" labelwidth="100" type="int" len="2" nulls="false" value="0"/>
		<A id="TASKSID" name="Задачи" caption="Задачи" labelwidth="300" type="number" nulls="true"/>
		<A id="STATEID" name="Состояние" caption="Состояние" labelwidth="300" type="ref" pid="BPACTIVITYID" table="STATE" ret="STATENAME" nulls="true"/>
		<A id="STATELIST" name="Условие перехода" caption="Условие перехода" type="list" nulls="false">
			<AI id="Yes" name="Да"/>
			<AI id="No" name="Нет"/>
		</A>
		<A id="DATECREATE" name="Дата создания" caption="Дата создания" type="datetime" nulls="true" visible="grid" readonly="true"/>
		<A id="DATECHANGE" name="Дата изменения" caption="Дата изменения" type="datetime" nulls="true" visible="grid" readonly="true"/>
		<A id="USERS" name="Инициатор" caption="Инициатор" type="string" nulls="true" readonly="true" virtual="true" formula="select s.name from tasks t, users s where t.ID = @ID::bigint and s.id = t.uid"/>
		<A id="PROGRESS" name="Ход выполнения" caption="Ход выполнения" type="text" nulls="true"/>
		<A id="EXECUTOR" name="Исполнитель" caption="Исполнитель" type="ref" table="USERS" ret="NAME" form="Users" nulls="true" visible="grid" readonly="true"/>
	</ATTRIBUTES>
	<GROUPS_ATTRIBUTES name="Группы атрибутов">
		<GA id="LeadTime" name="Время выполнения" caption="Время выполнения">
			<A id="DAYS" name="Дни" width="33"/>
			<A id="HOURS" name="Часы" width="33"/>
			<A id="MINUTES" name="Минуты" width="34"/>
		</GA>
	</GROUPS_ATTRIBUTES>
	<TABLES name="Таблицы">
		<TABLE id="BPPOOL" name="Процессы">
			<GA id="DictionaryNote"/>
			<TI unique="CODE"/>
		</TABLE>
		<TABLE id="BPEVENT" name="События">
			<A id="BPPOOLID" name="Ссылка на заголовок" caption="Ссылка на заголовок" parentkey="cascade"/>
			<GA id="DictionaryNote"/>
			<GA id="Output" name="Выход " caption="Выход ">
				<A id="BPACTIVITYID" name="Действие" caption="Действие" labelwidth="100"/>
			</GA>
			<GA>
				<A id="TYPEEVENT" name="Тип события" caption="Тип события" type="list" nulls="true">
					<AI id="TBEGIN" name="Начало события"/>
					<AI id="TINTERVAL" name="Промежуточное событие"/>
					<AI id="TEND" name="Конец события"/>
				</A>
			</GA>
			<TI unique="BPPOOLID,CODE"/>
		</TABLE>
		<TABLE id="BPACTIVITY" name="Действия">
			<A id="BPPOOLID" name="Ссылка на заголовок" caption="Ссылка на заголовок" parentkey="cascade"/>
			<GA id="DictionaryNote"/>
			<GA id="Output" name="Выход " caption="Выход ">
				<A id="BPACTIVITYID" name="Действие" caption="Действие" labelwidth="100" width="50"/>
				<A id="BPEVENTID" name="Событие" caption="Событие" labelwidth="100" width="50"/>
				<A id="BPGATEWAYID" name="Оператор ИЛИ" caption="Оператор ИЛИ" labelwidth="100" width="50"/>
				<A id="BPGATEWAYANDID" name="Оператор И" caption="Оператор И" labelwidth="100" width="50"/>
			</GA>
			<A id="BPPOOLID1" name="Подчиненный процесс" caption="Подчиненный процесс" labelwidth="300" type="ref" table="BPPOOL" ret="CODE" form="Bppool" nulls="true" local="true"/>
			<GA id="LeadTime"/>
			<A id="LEVACCESSID" labelwidth="300"/>
			<TI unique="BPPOOLID,CODE"/>
		</TABLE>
		<TABLE id="STATE" name="Состояние">
			<A id="BPACTIVITYID" name="Ссылка на действия" caption="Ссылка на действия" parentkey="cascade"/>
			<GA>
				<A id="STATENAME" name="Наименование состояния" caption="Наименование состояния" labelwidth="100" width="50" type="string"/>
				<A id="STATELIST"/>
			</GA>
		</TABLE>
		<TABLE id="BPGATEWAY" name="Оператор ИЛИ">
			<A id="BPPOOLID" name="Ссылка на заголовок" caption="Ссылка на заголовок" parentkey="cascade"/>
			<GA id="DictionaryNote"/>
			<GA id="Output" name="Выход " caption="Выход ">
				<A id="EXPRESSION" name="Логическое выражение" caption="Логическое выражение" labelwidth="400" type="text" value="true" local="true"/>
				<A id="BPACTIVITYID" name="Действие ДА" caption="Действие ДА" labelwidth="100" width="50"/>
				<A id="BPACTIVITYID2" name="Действие НЕТ" caption="Действие НЕТ" labelwidth="100" width="50"/>
			</GA>
			<TI unique="BPPOOLID,CODE"/>
		</TABLE>
		<TABLE id="BPGATEWAYAND" name="Оператор И">
			<A id="BPPOOLID" name="Ссылка на заголовок" caption="Ссылка на заголовок" parentkey="cascade"/>
			<GA id="DictionaryNote"/>
			<TI unique="BPPOOLID,CODE"/>
		</TABLE>
		<TABLE id="BPGATEWAYANDSP" name="Выходы">
			<A id="BPGATEWAYANDID" name="Ссылка на заголовок" caption="Ссылка на заголовок" parentkey="cascade"/>
			<A id="CODE" name="Содержание" caption="Содержание" type="string" nulls="true"/>
			<GA id="Output" name="Выход" caption="Выход">
				<A id="BPPOOLID" visible="ЛОЖЬ" formula="select s.bppoolid from BPGATEWAYAND s where s.ID = @BPGATEWAYANDID ::bigint"/>
				<A id="BPACTIVITYID" name="Действие" caption="Действие" labelwidth="100"/>
			</GA>
			<TI unique="BPGATEWAYANDID, BPACTIVITYID"/>
		</TABLE>
		<TABLE id="TASKS" name="Задачи">
			<GA>
				<A id="TASKSID" visible="ЛОЖЬ"/>
				<A id="TASKSNAME" name="Наименование задачи" caption="Наименование задачи" labelwidth="200" type="text" readonly="true" virtual="true" formula="select P.name from BPACTIVITY P where P.ID = @BPACTIVITYID::BIGINT"/>
				<A id="USERS"/>
				<A id="EXECUTOR"/>
				<A id="PROGRESS"/>
				<A id="DATECREATE"/>
				<A id="DATECHANGE"/>
				<A id="BPPOOLID"/>
				<A id="BPACTIVITYID" readonly="true"/>
				<A id="STATEID"/>
				<A id="NOTE"/>
				<A id="STATUS" name="Статус" caption="Статус" type="list" nulls="false" value="0">
					<AI id="0" name="Ожидает выполнения"/>
					<AI id="1" name="Выполнено"/>
				</A>
			</GA>
			<A id="DOCLINKS_OUT" name="Записи исходящие" caption="Записи исходящие" query="">
				<AI id="Expshd" name="Расходные расписания"/>
			</A>
		</TABLE>
		<TABLE id="ACTIVETASKS" name="Активные задачи" tablename="TASKS" virtual="true" query="select t.* from tasks t, state s where s.id = t.stateid and s.statelist = 'No' and t.status = '0'">
			<GA>
				<A id="TASKSID" visible="ЛОЖЬ"/>
				<A id="TASKSNAME" name="Наименование задачи" caption="Наименование задачи" labelwidth="200" type="text" readonly="true" virtual="true" formula="select P.name from BPACTIVITY P where P.ID = @BPACTIVITYID::BIGINT"/>
				<A id="USERS"/>
				<A id="EXECUTOR"/>
				<A id="PROGRESS"/>
				<A id="DATECREATE"/>
				<A id="DATECHANGE"/>
				<A id="BPPOOLID"/>
				<A id="BPACTIVITYID" readonly="true"/>
				<A id="STATEID"/>
				<A id="NOTE"/>
				<A id="STATUS" name="Статус" caption="Статус" type="list" nulls="false" value="0">
					<AI id="0" name="Ожидает выполнения"/>
					<AI id="1" name="Выполнено"/>
				</A>
			</GA>
		</TABLE>
	</TABLES>
	<ACTIONS name="Действия">
		<ACTION id="SendForExecution" name="Отправить на исполнение" type="procedure" procedure="p_action_tasks_start"/>
		<ACTION id="TasksRollBack" name="Откатить" type="procedure" procedure="p_action_tasks_rollback"/>
	</ACTIONS>
	<REPORTS name="Отчеты"/>
	<FORMS id="Forms" name="Формы">
		<FORM id="Bppool" name="Процессы">
			<GRID id="Bppool" name="Процессы" table="BPPOOL"/>
			<TABS>
				<TAB name="События">
					<GRID id="Bpevent" name="События" table="BPEVENT"/>
				</TAB>
				<TAB name="Действия">
					<GRID id="Bpactivity" name="Действия" table="BPACTIVITY"/>
					<GRID id="State" name="Состояние" table="STATE"/>
				</TAB>
				<TAB name="Оператор ИЛИ">
					<GRID id="Bpgateway" name="Оператор ИЛИ" table="BPGATEWAY"/>
				</TAB>
				<TAB name="Оператор И">
					<GRID id="Bpgatewayand" name="Оператор И" table="BPGATEWAYAND"/>
					<GRID id="Bpgatewayandsp" name="Выходы" table="BPGATEWAYANDSP"/>
				</TAB>
			</TABS>
		</FORM>
		<FORM id="Tasks" name="Задачи">
			<GRID id="Tasks" name="Задачи" table="TASKS" actionlist="SendForExecution;TasksRollBack"/>
		</FORM>
		<FORM id="ActiveTasks" name="Активные задачи">
			<GRID id="ActiveTasks" name="Активные задачи" table="ACTIVETASKS" actionlist="SendForExecution;TasksRollBack">
				<MENU>
					<MI actionlist="Update;View;MoveFolder"/>
				</MENU>
			</GRID>
		</FORM>
	</FORMS>
</SYSTEM>

 CREATE  OR  REPLACE  FUNCTION  public.p_action_check_before_load(id  bigint)
  RETURNS  void
  LANGUAGE  plpgsql
AS  $function$
declare

	FLAG  BOOLEAN:=EXISTS(SELECT  1  FROM  REGISTER  R  WHERE  R.ID  =  P_ACTION_CHECK_BEFORE_LOAD.ID  AND  R.STATUS  =  '4');  --сформирована  ведомость

begin
	
	IF  FLAG  THEN
		RAISE  USING  MESSAGE  =  'По  расчетному  документу  сформированы  ведомости  по  оплате  труда';
        END  IF;

end;
$function$
 

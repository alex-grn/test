 CREATE  OR  REPLACE  FUNCTION  public.p_action_registerstransfers_roll_back(idlist  text)
  RETURNS  void
  LANGUAGE  plpgsql
AS  $function$
declare
    --Действие  "Расформировать  ведомость"  в  разделе  "Реестры  перечислений"  REGISTERSTRANSFERS
    REC  record;
    NID  BIGINT;  --id  таблицы  заполения;
begin
    update  SHEETDETAILS  S
          set  SUMTRN                              =  null,
                  REGISTERSTRANSFERSID  =  null
      where  S.REGISTERSTRANSFERSID  =  any(P_SYSTEM_GET_SELECTLIST(IDLIST));
    delete  from  REGISTERSTRANSFERS  S  where  S.ID  =  any(P_SYSTEM_GET_SELECTLIST(IDLIST));
end;
$function$
 

 CREATE  OR  REPLACE  FUNCTION  public.p_action_file_convert(idlist  text,  ident  bigint,  uid  bigint  DEFAULT  1)
  RETURNS  text
  LANGUAGE  plpgsql
AS  $function$
  declare  
      nUID                bigint  =  uid;
      nIDENT            bigint  =  ident;
      rec                  record;
      tresult          text;
  begin
      
      for  rec  in(
              select  f.ID  as  KID,c.NAME  as  CONVNAME
                  from  INPUTKRF  f,
                            CONV  c
                where  f.ID  =  ANY(P_SYSTEM_GET_SELECTLIST(IDLIST))
                    and  c.ID  =  f.CONVID
      )
      loop
              begin
                tresult:=  p_system_file_convert(nIDENT,rec.CONVNAME,true,nUID);
                update  INPUTKRF  f  set  log  =  tresult  where  f.id  =  rec.KID;
              exception  when  others  then  
                                  GET  STACKED  DIAGNOSTICS  
            						  tresult      =  MESSAGE_TEXT;
                                  update  INPUTKRF  f  set  log  =  tresult  where  f.id  =  rec.KID;
              end;
      end  loop;
      RETURN  tresult;
  end;
$function$
 

<?xml version="1.0" encoding="UTF-8"?>
<report name="report">
    <templates>
        <template code="DEFAULT" documentName="Receivedpacket.xls" documentPath="Receivedpacket.xls" outputType="xls" outputNamePattern="Receivedpacket.xls"/>
    </templates>
    <rootBand name="Root" orientation="H">
        <bands>
		    <band name="Header" orientation="H">
				<queries>
                     <query name="Header" type="sql">
                        <script>
							 select p_tools_nmonth_to_smonth(${repmonth}::integer) as REPMONTH, 
								    p_tools_nmonth_to_smonth(${repmonthby}::integer) as REPMONTHBY,
									${repyear} as REPYEAR
								;
						</script>
                     </query>
                </queries>
			</band>
			<band name="spec1" orientation="H">
				<queries>
                     <query name="spec1" type="sql">
                        <script>
							select count(*)
							  from benefitspackets p,
								   beneficiariesregisters r,
							  	   benefitstypedir t
							  where r.benefitspacketsid = p.id
							    and t.id = r.benefitstypenamedirid 
							    and t.rosternumber = 1
								and r.status != '02'
							    and p.repyear = ${repyear}::integer
							    and p.repmonth::integer between ${repmonth}::integer and ${repmonthby}::integer
   							   ;
						</script>
                     </query>
                </queries>
			</band>
			<band name="spec2" orientation="H">
				<queries>
                     <query name="spec2" type="sql">
                        <script>
							select count(*)
							  from benefitspackets p,
								   beneficiariesregisters r,
							  	   benefitstypedir t
							  where r.benefitspacketsid = p.id
							    and t.id = r.benefitstypenamedirid 
							    and t.rosternumber = 2
								and r.status != '02'
							    and p.repyear = ${repyear}::integer
							    and p.repmonth::integer between ${repmonth}::integer and ${repmonthby}::integer
   							   ;
						</script>
                     </query>
                </queries>
			</band>
			<band name="spec3" orientation="H">
				<queries>
                     <query name="spec3" type="sql">
                        <script>
							select count(*)
							  from benefitspackets p,
								   beneficiariesregisters r,
							  	   benefitstypedir t
							  where r.benefitspacketsid = p.id
							    and t.id = r.benefitstypenamedirid 
							    and t.rosternumber = 3
								and r.status != '02'
							    and p.repyear = ${repyear}::integer
							    and p.repmonth::integer between ${repmonth}::integer and ${repmonthby}::integer
   							   ;
						</script>
                     </query>
                </queries>
			</band>
			<band name="spec4" orientation="H">
				<queries>
                     <query name="spec4" type="sql">
                        <script>
							select count(*)
							  from benefitspackets p,
								   beneficiariesregisters r,
							  	   benefitstypedir t
							  where r.benefitspacketsid = p.id
							    and t.id = r.benefitstypenamedirid 
							    and t.rosternumber = 4
								and r.status != '02'
							    and p.repyear = ${repyear}::integer
							    and p.repmonth::integer between ${repmonth}::integer and ${repmonthby}::integer
   							   ;
						</script>
                     </query>
                </queries>
			</band>
			<band name="spec5" orientation="H">
				<queries>
                     <query name="spec5" type="sql">
                        <script>
							select count(*)
							  from benefitspackets p,
								   beneficiariesregisters r,
							  	   benefitstypedir t
							  where r.benefitspacketsid = p.id
							    and t.id = r.benefitstypenamedirid 
							    and t.rosternumber = 5
								and r.status != '02'
							    and p.repyear = ${repyear}::integer
							    and p.repmonth::integer between ${repmonth}::integer and ${repmonthby}::integer
   							   ;
						</script>
                     </query>
                </queries>
			</band>
			<band name="spec6" orientation="H">
				<queries>
                     <query name="spec6" type="sql">
                        <script>
							select count(*)
							  from benefitspackets p,
								   beneficiariesregisters r,
							  	   benefitstypedir t
							  where r.benefitspacketsid = p.id
							    and t.id = r.benefitstypenamedirid 
							    and t.rosternumber = 6
								and r.status != '02'
							    and p.repyear = ${repyear}::integer
							    and p.repmonth::integer between ${repmonth}::integer and ${repmonthby}::integer
   							   ;
						</script>
                     </query>
                </queries>
			</band>
			<band name="all_spec" orientation="H">
				<queries>
                     <query name="all_spec" type="sql">
                        <script>
							select count(*)
							  from benefitspackets p,
								   beneficiariesregisters r,
							  	   benefitstypedir t
							  where r.benefitspacketsid = p.id
							    and t.id = r.benefitstypenamedirid 
							    and t.rosternumber in (1,2,3,4,5,6)
								and r.status != '02'
							    and p.repyear = ${repyear}::integer
							    and p.repmonth::integer between ${repmonth}::integer and ${repmonthby}::integer
   							   ;
						</script>
                     </query>
                </queries>
			</band>
        </bands>
        <queries/>
    </rootBand>
</report>